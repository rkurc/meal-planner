{% extends "base.html" %}

{% block title %}Recipe List - Meal Planner{% endblock %}

{% block content %}
    <h1>Recipes</h1>

    <form method="GET" action="{{ url_for('recipe_list') }}" style="margin-bottom: 20px;">
        <input type="text" name="search_query" placeholder="Search term..." value="{{ search_query if search_query }}" style="width: 250px; padding: 8px; margin-right: 5px;">
        <input type="text" name="filter_ingredient" placeholder="Filter by ingredient..." value="{{ filter_ingredient if filter_ingredient }}" style="width: 200px; padding: 8px; margin-right: 5px;">
        <input type="submit" value="Search/Filter" class="button">
        {% if search_query or filter_ingredient %}
            <a href="{{ url_for('recipe_list') }}" class="button-secondary" style="margin-left: 5px;">Clear</a>
        {% endif %}
    </form>

    <a href="{{ url_for('new_recipe') }}" class="button" style="margin-bottom: 20px; display: inline-block;">Add New Recipe</a>

    {% if recipes %}
        <ul>
            {% for recipe in recipes %}
                <li>
                    <strong>{{ recipe.name }}</strong>
                    <div style="float: right;">
                        <a href="{{ url_for('recipe_detail', recipe_id=recipe.id) }}" class="button-secondary">View Details</a>
                        <a href="{{ url_for('edit_recipe', recipe_id=recipe.id) }}" class="button-secondary">Edit</a>
                        <form action="{{ url_for('delete_recipe_route', recipe_id=recipe.id) }}" method="POST" style="display: inline;">
                            <input type="submit" value="Delete" class="button-danger" onclick="return confirm('Are you sure you want to delete this recipe?');">
                        </form>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% elif search_query or filter_ingredient %}
        <p>No recipes found matching your criteria. <a href="{{ url_for('new_recipe') }}">Add one!</a></p>
    {% else %}
        <p>No recipes found. <a href="{{ url_for('new_recipe') }}">Add one!</a></p>
    {% endif %}
{% endblock %}
